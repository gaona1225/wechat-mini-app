"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _pass_config=require("../pass_config"),_pass_utilsToastFn=require("../pass_utils/toastFn"),_pass_utilsApiAjax=require("../pass_utils/apiAjax"),setWeChatStorage=function(t,e){wx.setStorage({key:"userInfo",data:{bduss:t.ppUser.bduss,waimai_stoken:t.ppUser.waimai_stoken,stoken:t.ppUser.stoken,bdstoken:t.ppData.bdstoken,authsid:t.ppData.authsid},success:function(){var t=void 0,a=getCurrentPages();if(e&&140001==e)try{t=wx.getStorageSync("pageStackLength"),t&&wx.navigateBack({delta:a.length-t+1})}catch(s){console.log(s)}},fail:function(){console.log("setStorage fail")}})},loginSucc=function(t,e){var a=t.data;140001==a.ppErrorInfo.errNo?(e.setData({errno:a.ppErrorInfo.errNo}),setWeChatStorage(a,"140001")):400410==a.ppErrorInfo.errNo?(setWeChatStorage(a,"400410"),wx.navigateTo({url:"/pages/pass_setpassword/setpassword?errNo=400410&showIgnoreBtn=true&notRegist="+e.data.notRegist+"&smsCode="+e.data.inputValue+"&telnum="+e.data.telnum})):400412==a.ppErrorInfo.errNo?(setWeChatStorage(a,"400412"),wx.navigateTo({url:"/pages/pass_userinfo/userinfo?errNo=400412&showIgnoreBtn=true&notRegist="+e.data.notRegist+"&smsCode="+e.data.inputValue+"&telnum="+e.data.telnum})):_pass_utilsToastFn.toastFn(e,a.ppErrorInfo.msg)},getLoginInfo=function(t){var e="wp/api/login",a={username:t.data.telnum.replace(/[ ]/g,""),password:t.data.inputValue,action:"login",sms:1,smsverify:1,clientfrom:"wap",is_voice_sms:"0",wechat:1,tpl:_pass_config.tpl};_pass_utilsApiAjax.apiAjax(e,a,"POST",loginSucc,t)};exports.getLoginInfo=getLoginInfo;